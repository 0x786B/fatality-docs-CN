## animated_texture

此类型是一个动画纹理。此纹理类型仅支持 **动画GIF** 类型，不支持 **APNG**。

> 此类型继承自 [`texture`](/api/draw/managed/texture "此类型代表一个纹理对象。") 类型。其所有基础方法和字段在此类型中也可用。

> 如果你传入一个不支持的类型，它将会完全像 [`texture`](/api/draw/managed/texture "此类型代表一个纹理对象。") 类型一样工作，这意味着控制帧和循环将没有意义。

> 虽然可以将此类型用于纹理图集，但强烈不建议这样做。它会在内存中产生额外的纹理对象，并且整体上会慢得多。相反，建议构建一个实际的纹理图集，使用 [`texture`](/api/draw/managed/texture "此类型代表一个纹理对象。") 类型，并使用纹理映射。

## __call

[![Constructor][这是此类型的构造函数定义。]rw]

构造动画纹理。

> 传递无效指针，或小于大小的内存区域将导致**崩溃**。

**参数**

*1. 从文件加载：*

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `path` | `string` | 纹理文件的路径。 |

*2. 从内存加载：*

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `data` | [`ptr`](/api/common-types/ptr "此类型是一个字面指针。") | 指向内存中纹理**文件**数据的指针。 |
| `sz` | `int` | 纹理**文件**数据的大小。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `animated_texture` | 动画纹理实例。 |

**示例**

```lua
local gif = draw.animated_texture('funny_gif.gif');
```

## should_loop

[![Field][此字段是一个普通字段，必须使用点(.)来访问。]rw]

类型：`bool`

如果设置为 `false`，将不会自动循环动画。默认为 `true`。

## reset_loop

[![Method][此字段是一个方法，必须使用冒号(:)来调用。]rw]

重置循环，从第一帧开始运行。

**参数**

无。

**返回值**

无。

**示例**

```lua
gif:reset_loop();
```

## set_frame

[![Method][此字段是一个方法，必须使用冒号(:)来调用。]rw]

设置动画的特定帧。如果启用了循环，将从传入的帧继续循环。否则，将显示动画的特定帧。

> 帧计数从 `0` 开始。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `frame` | `int` | 帧号。无效的帧号将被限制在有效范围内。 |

**返回值**

无。

**示例**

```lua
gif:set_frame(5);
```

## get_frame_count

[![Method][此字段是一个方法，必须使用冒号(:)来调用。]rw]

返回动画中的帧数。

**参数**

无。

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `int` | 帧数。 |

**示例**

```lua
local frames = gif:get_frame_count();
gif:set_frame(frames - 2); -- 设置到倒数第二帧
```