## 数学

用法：`math.{func}`

## abs

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回一个数字的绝对值。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 输入数字。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 绝对值。 |

**示例**

```lua
local abs = math.abs(-5); -- 5
```

## acos

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回一个数字的反余弦值（弧度）。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 输入数字（-1 到 1 之间）。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 反余弦值，以弧度表示。 |

**示例**

```lua
local angle = math.acos(0.5); -- ~1.0472 (60度的弧度值)
```

## asin

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回一个数字的反正弦值（弧度）。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 输入数字（-1 到 1 之间）。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 反正弦值，以弧度表示。 |

**示例**

```lua
local angle = math.asin(0.5); -- ~0.5236 (30度的弧度值)
```

## atan

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回一个数字的反正切值（弧度）。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 输入数字。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 反正切值，以弧度表示。 |

**示例**

```lua
local angle = math.atan(1); -- ~0.7854 (45度的弧度值)
```

## atan2

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回 y/x 的反正切值（弧度）。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `y` | `number` | Y 坐标。 |
| `x` | `number` | X 坐标。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 反正切值，以弧度表示。 |

**示例**

```lua
local angle = math.atan2(1, 1); -- ~0.7854 (45度的弧度值)
```

## ceil

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回大于或等于给定数字的最小整数。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 输入数字。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 向上取整的结果。 |

**示例**

```lua
local ceil = math.ceil(3.3); -- 4
```

## cos

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回一个角度的余弦值（角度以弧度表示）。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 角度（弧度）。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 余弦值。 |

**示例**

```lua
local cos = math.cos(0); -- 1
```

## cosh

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回一个数字的双曲余弦值。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 输入数字。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 双曲余弦值。 |

**示例**

```lua
local cosh = math.cosh(0); -- 1
```

## deg

[![函数][这是一个必须使用点(.)调用的函数]rw]

将弧度转换为角度。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 弧度值。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 角度值。 |

**示例**

```lua
local deg = math.deg(math.pi); -- 180
```

## exp

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回 e 的 x 次幂。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 指数。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | e 的 x 次幂。 |

**示例**

```lua
local exp = math.exp(1); -- ~2.7183 (e)
```

## floor

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回小于或等于给定数字的最大整数。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 输入数字。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 向下取整的结果。 |

**示例**

```lua
local floor = math.floor(3.7); -- 3
```

## fmod

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回 x 除以 y 的余数。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 被除数。 |
| `y` | `number` | 除数。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 余数。 |

**示例**

```lua
local mod = math.fmod(5.3, 2); -- 1.3
```

## frexp

[![函数][这是一个必须使用点(.)调用的函数]rw]

将浮点数分解为尾数和指数。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 输入数字。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 尾数。 |
| `number` | 指数。 |

**示例**

```lua
local m, e = math.frexp(3.14); -- ~0.785, 2
```

## huge

最大可表示的数字。

## ldexp

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回 m * (2 ^ e)。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `m` | `number` | 尾数。 |
| `e` | `number` | 指数。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 计算结果。 |

**示例**

```lua
local x = math.ldexp(0.785, 2); -- ~3.14
```

## log

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回一个数字的自然对数。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 输入数字。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 自然对数值。 |

**示例**

```lua
local log = math.log(2.7183); -- ~1
```

## log10

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回一个数字以10为底的对数。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 输入数字。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 以10为底的对数值。 |

**示例**

```lua
local log10 = math.log10(100); -- 2
```

## max

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回参数中的最大值。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `...` | `number` | 数字列表。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 最大值。 |

**示例**

```lua
local max = math.max(1, 2, 3); -- 3
```

## min

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回参数中的最小值。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `...` | `number` | 数字列表。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 最小值。 |

**示例**

```lua
local min = math.min(1, 2, 3); -- 1
```

## modf

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回一个数字的整数部分和小数部分。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 输入数字。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 整数部分。 |
| `number` | 小数部分。 |

**示例**

```lua
local i, f = math.modf(3.14); -- 3, 0.14
```

## pi

圆周率的值。

## pow

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回 x 的 y 次幂。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 底数。 |
| `y` | `number` | 指数。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | x 的 y 次幂。 |

**示例**

```lua
local pow = math.pow(2, 3); -- 8
```

## rad

[![函数][这是一个必须使用点(.)调用的函数]rw]

将角度转换为弧度。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 角度值。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 弧度值。 |

**示例**

```lua
local rad = math.rad(180); -- ~3.1416 (π)
```

## random

[![函数][这是一个必须使用点(.)调用的函数]rw]

生成随机数。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `m` | `number` | （可选）下限或上限。 |
| `n` | `number` | （可选）上限。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 随机数。 |

**示例**

```lua
local rand1 = math.random();    -- 0 到 1 之间的随机数
local rand2 = math.random(6);   -- 1 到 6 之间的整数
local rand3 = math.random(1,6); -- 1 到 6 之间的整数
```

## randomseed

[![函数][这是一个必须使用点(.)调用的函数]rw]

设置随机数生成器的种子。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 种子值。 |

**返回值**

无。

**示例**

```lua
math.randomseed(os.time());
```

## sin

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回一个角度的正弦值（角度以弧度表示）。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 角度（弧度）。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 正弦值。 |

**示例**

```lua
local sin = math.sin(math.pi/2); -- 1
```

## sinh

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回一个数字的双曲正弦值。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 输入数字。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 双曲正弦值。 |

**示例**

```lua
local sinh = math.sinh(0); -- 0
```

## sqrt

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回一个数字的平方根。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 输入数字。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 平方根。 |

**示例**

```lua
local sqrt = math.sqrt(16); -- 4
```

## tan

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回一个角度的正切值（角度以弧度表示）。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 角度（弧度）。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 正切值。 |

**示例**

```lua
local tan = math.tan(math.pi/4); -- ~1
```

## tanh

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回一个数字的双曲正切值。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `x` | `number` | 输入数字。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `number` | 双曲正切值。 |

**示例**

```lua
local tanh = math.tanh(0); -- 0
```

## calc_angle

[![函数][这是一个必须使用点(.)调用的函数]rw]

计算两个向量之间的角度。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `src` | [`vector`](/api/common-types/vector "此类型是一个常见的 3D 向量 (x, y, z)。") | 源向量。 |
| `dst` | [`vector`](/api/common-types/vector "此类型是一个常见的 3D 向量 (x, y, z)。") | 目标向量。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| [`vector`](/api/common-types/vector "此类型是一个常见的 3D 向量 (x, y, z)。") | 角度。 |

**示例**

```lua
local ang = math.calc_angle(vec1, vec2);
```

## angle_normalize

[![函数][这是一个必须使用点(.)调用的函数]rw]

标准化一个角度。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `angle` | `float` | 输入角度。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `float` | 标准化后的角度。 |

**示例**

```lua
local norm = math.angle_normalize(560);
```

## approach_angles

[![函数][这是一个必须使用点(.)调用的函数]rw]

随时间接近一个角度。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `from` | [`vector`](/api/common-types/vector "此类型是一个常见的 3D 向量 (x, y, z)。") | 起始角度。 |
| `to` | [`vector`](/api/common-types/vector "此类型是一个常见的 3D 向量 (x, y, z)。") | 目标角度。 |
| `speed` | `float` | 接近速度。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| [`vector`](/api/common-types/vector "此类型是一个常见的 3D 向量 (x, y, z)。") | 差值角度。 |

**示例**

```lua
local ang = math.approach_angles(from, to, 1.0 / game.global_vars.frametime);
```

## edge_point

[![函数][这是一个必须使用点(.)调用的函数]rw]

返回盒子边缘上的一个点。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `mins` | [`vector`](/api/common-types/vector "此类型是一个常见的 3D 向量 (x, y, z)。") | 盒子最小值。 |
| `maxs` | [`vector`](/api/common-types/vector "此类型是一个常见的 3D 向量 (x, y, z)。") | 盒子最大值。 |
| `dir` | [`vector`](/api/common-types/vector "此类型是一个常见的 3D 向量 (x, y, z)。") | 点的方向（角度）。 |
| `radius` | `float` | 区域半径。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| [`vector`](/api/common-types/vector "此类型是一个常见的 3D 向量 (x, y, z)。") | 点。 |

**示例**

```lua
local point = math.edge_point(mins, maxs, dir, 5);
```

## lerp

[![函数][这是一个必须使用点(.)调用的函数]rw]

线性插值。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `t1` | `float` | 起始值。 |
| `t2` | `float` | 结束值。 |
| `progress` | `float` | 插值量。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `float` | 插值后的值。 |

**示例**

```lua
local mid = math.lerp(0, 100, 0.5);
```

## vector_angles

[![函数][这是一个必须使用点(.)调用的函数]rw]

从向量计算角度。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `forward` | [`vector`](/api/common-types/vector "此类型是一个常见的 3D 向量 (x, y, z)。") | 源向量。 |
| `up` | [`vector`](/api/common-types/vector "此类型是一个常见的 3D 向量 (x, y, z)。") | 上向量。默认为 `nil`。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| [`vector`](/api/common-types/vector "此类型是一个常见的 3D 向量 (x, y, z)。") | 角度。 |

**示例**

```lua
local ang = math.vector_angles(fw);
```

## world_to_screen

[![函数][这是一个必须使用点(.)调用的函数]rw]

将3D向量转换成2D向量用于渲染在窗口中。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `xyz` | [`vector`](/api/common-types/vector "此类型是一个常见的 3D 向量 (x, y, z)。") | 世界中的位置。 |
| `round` | `bool` | 是否应该四舍五入输出。默认为 `true`。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| [`vec2`](/api/draw/common-types/vec2 "此类型是渲染系统中使用的 2D 向量。") | 窗口上的点。 |

**示例**

```lua
local point = math.world_to_screen(game_point);
```

## clamp

[![函数][这是一个必须使用点(.)调用的函数]rw]

将值限制在最小值和最大值之间。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `n` | `float` | 值。 |
| `lower` | `float` | 最小值。 |
| `upper` | `float` | 最大值。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `float` | 限制后的值。 |

**示例**

```lua
local x = math.clamp(50, 5, 25); -- 25
```

## remap_val

[![函数][这是一个必须使用点(.)调用的函数]rw]

将值从一个范围映射到另一个范围。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `val` | `float` | 值。 |
| `a` | `float` | 源范围最小值。 |
| `b` | `float` | 源范围最大值。 |
| `c` | `float` | 目标范围最小值。 |
| `d` | `float` | 目标范围最大值。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `float` | 映射后的值。 |

**示例**

```lua
local mapped = math.remap_val(0.5, 0, 1, 0, 100); -- 50
```

## remap_val_clamped

[![函数][这是一个必须使用点(.)调用的函数]rw]

将值从一个范围映射到另一个范围。另外，基于源范围限制值。

**参数**

| 名称 | 类型 | 描述 |
| ---- | ---- | ----------- |
| `val` | `float` | 值。 |
| `a` | `float` | 源范围最小值。 |
| `b` | `float` | 源范围最大值。 |
| `c` | `float` | 目标范围最小值。 |
| `d` | `float` | 目标范围最大值。 |

**返回值**

| 类型 | 描述 |
| ---- | ----------- |
| `float` | 映射后的值。 |

**示例**

```lua
local mapped = math.remap_val_clamped(5, 0, 1, 0, 100); -- 100
```

## vec2

[![函数][这是一个必须使用点(.)调用的函数]rw]

[`draw.vec2()`](/api/draw/common-types/vec2#call "此类型是渲染系统中使用的 2D 向量。") 的别名。

**示例**

```lua
local vec = math.vec2(5, 5);
```

## vec3

[![函数][这是一个必须使用点(.)调用的函数]rw]

[`vector()`](/api/common-types/vector#call "构造一个向量。") 的别名。

**示例**

```lua
local vec = math.vec3(5, 12, 5);
```